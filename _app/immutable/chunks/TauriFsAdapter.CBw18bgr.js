var s=Object.defineProperty;var o=(i,t,e)=>t in i?s(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e;var r=(i,t,e)=>(o(i,typeof t!="symbol"?t+"":t,e),e);import{_ as h}from"./preload-helper.BQ24v_F8.js";import{S as c}from"./StorageAdapter.BxeVfabK.js";class d extends c{constructor(e){if(e.length==0)throw new Error("Tauri FS: Empty filename given.");super();r(this,"_readTextFile");r(this,"_writeTextFile");r(this,"_exists");r(this,"_BaseDirectory");r(this,"fileName");this.fileName=e}static create(e){const a=new this(e);return a.init().then(()=>a)}async init(){let e=await h(()=>import("./fs.WaXJNqoc.js"),__vite__mapDeps([0,1]),import.meta.url);this._readTextFile=e.readTextFile,this._writeTextFile=e.writeTextFile,this._exists=e.exists,this._BaseDirectory=e.BaseDirectory,await this._exists("dummy",{dir:this._BaseDirectory.AppData})||await e.createDir("dummy",{dir:this._BaseDirectory.AppData,recursive:!0}),console.log("Loaded tauri filesystem adapter.")}async readJson(){try{return await this._exists(this.fileName,{dir:this._BaseDirectory.AppData})||await this._writeTextFile(this.fileName,"",{dir:this._BaseDirectory.AppData}),await this._readTextFile(this.fileName,{dir:this._BaseDirectory.AppData})}catch(e){throw console.error(e),e}}async writeJson(e){try{await this._writeTextFile(this.fileName,e,{dir:this._BaseDirectory.AppData,append:!1})}catch(a){throw console.error(a),a}}}export{d as TauriFsAdapter};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["./fs.WaXJNqoc.js","./tauri.D0GEGWO5.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
